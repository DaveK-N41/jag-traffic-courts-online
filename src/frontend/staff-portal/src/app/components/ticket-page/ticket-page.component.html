<app-page [busy]="busy">
  <div class="flex-wrapper">
  <div class="flex-header d-print-none mb-40" style="margin-bottom: 100px">
    <app-header></app-header>

    <div class="container">
      <section>
        <div><br />
          <h1 class="BC-Gov-32px-blue-text">Welcome, {{ fullName }}</h1>
          <p class="BC-Gov-15px-black-text">
            Court Registries Clerk,  {{ RegionName }}
            <span style="float:right">
              {{todayDate|date:"EEEE, MMMM d"}}{{(todayDate|date:"d")|dateSuffix}}{{todayDate|date:",&nbsp;y"}}
            </span>
          </p>
          <hr style="opacity: 1; color: #fcba19" />
        </div>
      </section>
      <section>
        <div class="flex-6-col">
            <div *ngIf="!showTicket">
              <div class="step1" >
                <div>
                  <div class="flex-container" style="width: 40%">
                    <table>
                      <tr>
                        <td><span class="BC-Gov-15px-black-text" style="color:green; width:40%;" ><b>{{ countNewTickets() }} NEW ticket records</b></span> </td>
                        <td style="width:5px">|</td>
                        <td style="width: 40%">
                            <select style="border: none;">
                              <option><span class="BC-Gov-15px-black-bold-text"><b>{{ RegionName }}</b>&nbsp;&nbsp;</span></option>
                            </select>
                        </td>
                      </tr>
                      <tr>
                        <td><span class="BC-Gov-15px-blue-text" ><b>Ticket number search:</b></span></td>
                        <td colspan="2">
                          <div class="inputContainer">
                            <input name="searchInput" matInput type="search" (keyup)="applyFilter($event)" autocomplete="off" class="input"/>
                            <mat-icon class="inputIcon">search</mat-icon>
                          </div>
                        </td>
                      </tr>
                    </table>
                  </div>
                </div>
              
              <table mat-table [dataSource]="dataSource" style="margin-bottom:30px;" class="mat-elevation-z8" matSort #tickTbSort="matSort">
              
                <ng-container matColumnDef="RedGreenAlert">
                  <th mat-header-cell *matHeaderCellDef></th>
                  <td mat-cell  *matCellDef="let element">
                    <mat-icon [ngStyle]="{ 'color':'red' }" *ngIf="element.RedGreenAlert =='Red'">cancel</mat-icon>
                    <mat-icon [ngStyle]="{ 'color':'green' }" *ngIf="element.RedGreenAlert =='Green'">check_circle</mat-icon>
                  </td>
                </ng-container>

                <ng-container matColumnDef="DateSubmitted">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> 
                      Date Submitted 
                    </th>
                    <td mat-cell *matCellDef="let element">
                      <span [style.font-weight]="element.Status == 'New' ? 'bold' : 'none'">{{ element.DateSubmitted ? (element.DateSubmitted | date: "yyyy/MM/dd") : "" }}</span>
                    </td>
                  </ng-container>
              
                  <ng-container matColumnDef="Ticket">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> 
                      Ticket
                    </th>
                    <td mat-cell *matCellDef="let element"> 
                      <span [style.font-weight]="element.Status == 'New' ? 'bold' : 'none'"><a (click)="backTicketList(element)" href="javascript:void()">{{ element.Ticket }}</a></span>
                    </td>
                  </ng-container>
              
                  <ng-container matColumnDef="Surname">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>  
                      Surname
                    </th>
                    <td mat-cell *matCellDef="let element">
                      <span [style.font-weight]="element.Status == 'New' ? 'bold' : 'none'">{{ element.Surname }}</span>
                    </td>
                  </ng-container>
              
                  <ng-container matColumnDef="GivenName">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> 
                      Given Name
                    </th>
                    <td mat-cell *matCellDef="let element">
                      <span [style.font-weight]="element.Status == 'New' ? 'bold' : 'none'">{{ element.GivenName}} </span>
                    </td>
                  </ng-container>
                  
                  <ng-container matColumnDef="RequestType">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> 
                      Request Type  
                    </th>
                    <td mat-cell *matCellDef="let element">  
                      <span [style.font-weight]="element.Status == 'New' ? 'bold' : 'none'">{{ element.RequestType }}</span> 
                    </td>
                  </ng-container>
                  
                  <ng-container matColumnDef="Status">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>   
                      Status
                    </th>
                    <td mat-cell *matCellDef="let element">  
                      <span [style.font-weight]="element.Status == 'New' ? 'bold' : 'none'">{{ element.Status }}</span>
                    </td>
                  </ng-container>
                  
                  <ng-container matColumnDef="FilingDate">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> 
                      Filing Date  
                    </th>
                    <td mat-cell *matCellDef="let element">  
                      <span [style.font-weight]="element.Status == 'New' ? 'bold' : 'none'">{{ element.FilingDate ? (element.FilingDate | date: "yyyy/MM/dd") : "" }}</span>
                    </td>
                  </ng-container>
                  
                  <ng-container matColumnDef="CourtHearing">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> 
                      Court Hearing
                    </th>
                    <td mat-cell *matCellDef="let element">  
                      <mat-checkbox [checked]="element.CourtHearing == 'Y'" [disabled]="true"></mat-checkbox>
                    </td>
                  </ng-container>
                  
                  <ng-container matColumnDef="CitizenFlag">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> 
                      Citizen Flag 
                    </th>
                    <td mat-cell *matCellDef="let element">  
                      <mat-checkbox [checked]="element.CitizenFlag == 'Y'" [disabled]="true"></mat-checkbox>
                    </td>
                  </ng-container>
                  
                  <ng-container matColumnDef="SystemFlag">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> 
                      System Flag
                    </th>
                    <td mat-cell *matCellDef="let element">  
                      <mat-checkbox [checked]="element.SystemFlag == 'Y'" [disabled]="true"></mat-checkbox>
                    </td>
                  </ng-container>
                  
                  <ng-container matColumnDef="AssignedTo">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> 
                      Assigned
                    </th>
                    <td mat-cell *matCellDef="let element">  
                      <span [style.font-weight]="element.Status == 'New' ? 'bold' : 'none'">{{ element.AssignedTo ? element.AssignedTo : "Unassigned" }}</span>
                    </td>
                  </ng-container>
          
                  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
              
              </table> 
              </div>
    
          
            </div>
            <div *ngIf="showTicket">
              <app-ticket-info (backTicketList)="backTicketpage()" [ticketInfo]="ticketInfo"></app-ticket-info>
            </div>

        </div>
      </section>

    </div>
    
    
  </div>

  <div class="flex-footer">
    <app-footer></app-footer>
  </div>
  </div>
</app-page>
